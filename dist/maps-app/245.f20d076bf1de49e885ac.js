(self.webpackChunkmaps_app=self.webpackChunkmaps_app||[]).push([[245],{245:(t,e,o)=>{"use strict";o.r(e),o.d(e,{MapsModule:()=>k});var n=o(116),r=o(699),a=o(985),i=o(619);const s=["map"],c=function(t){return{backgroundColor:t}};function l(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"li",5),i.NdJ("click",function(){const e=i.CHM(t).$implicit;return i.oxw().goToMarker(e)})("dblclick",function(){const e=i.CHM(t).index;return i.oxw().deleteMarker(e)}),i._uU(1),i.qZA()}if(2&t){const t=e.index;i.Q6J("ngStyle",i.VKq(2,c,e.$implicit.color)),i.xp6(1),i.hij(" Marker ",t+1," ")}}let p=(()=>{class t{constructor(){this.zoomLevel=10,this.mapCenter=[-90.583527,14.535879],this.markers=[]}ngAfterViewInit(){this.map=new a.Map({container:this.divMap.nativeElement,style:"mapbox://styles/mapbox/streets-v11",center:this.mapCenter,zoom:this.zoomLevel}),this.readLocalStorage()}addMarker(){const t="#xxxxxx".replace(/x/g,t=>(16*Math.random()|0).toString(16)),e=new a.Marker({draggable:!0,color:t}).setLngLat(this.mapCenter).addTo(this.map);this.markers.push({color:t,marker:e}),this.saveMarkersLocalStorage(),e.on("dragend",()=>{this.saveMarkersLocalStorage()})}goToMarker(t){var e;this.map.flyTo({center:null===(e=t.marker)||void 0===e?void 0:e.getLngLat()})}saveMarkersLocalStorage(){const t=[];this.markers.forEach(e=>{const o=e.color,{lng:n,lat:r}=e.marker.getLngLat();t.push({color:o,center:[n,r]})}),localStorage.setItem("markers",JSON.stringify(t))}readLocalStorage(){localStorage.getItem("markers")&&JSON.parse(localStorage.getItem("markers")).forEach(t=>{const e=new a.Marker({color:t.color,draggable:!0}).setLngLat(t.center).addTo(this.map);this.markers.push({marker:e,color:t.color}),e.on("dragend",()=>{this.saveMarkersLocalStorage()})})}deleteMarker(t){var e;console.log("deleting"),null===(e=this.markers[t].marker)||void 0===e||e.remove(),this.markers.splice(t,1),this.saveMarkersLocalStorage()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-bookmarks"]],viewQuery:function(t,e){if(1&t&&i.Gf(s,5),2&t){let t;i.iGM(t=i.CRH())&&(e.divMap=t.first)}},decls:6,vars:1,consts:[[1,"list-group"],[1,"list-group-item","list-group-item-info",3,"click"],["class","list-group-item",3,"ngStyle","click","dblclick",4,"ngFor","ngForOf"],[1,"map-container"],["map",""],[1,"list-group-item",3,"ngStyle","click","dblclick"]],template:function(t,e){1&t&&(i.TgZ(0,"ul",0),i.TgZ(1,"li",1),i.NdJ("click",function(){return e.addMarker()}),i._uU(2," + Add "),i.qZA(),i.YNc(3,l,2,4,"li",2),i.qZA(),i._UZ(4,"div",3,4)),2&t&&(i.xp6(3),i.Q6J("ngForOf",e.markers))},directives:[n.sg,n.PC],styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:100%}.list-group[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:99}li[_ngcontent-%COMP%]{cursor:pointer}"]}),t})(),m=(()=>{class t{constructor(){}ngOnInit(){new a.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[-90.583527,14.535879],zoom:18})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-full-screen"]],decls:1,vars:0,consts:[["id","map"]],template:function(t,e){1&t&&i._UZ(0,"div",0)},styles:["#map[_ngcontent-%COMP%]{width:100%;height:100%}"]}),t})();const d=["map"];let g=(()=>{class t{constructor(){this.lngLat=[0,0]}ngAfterViewInit(){const t=new a.Map({container:this.divMap.nativeElement,style:"mapbox://styles/mapbox/streets-v11",center:this.lngLat,zoom:15,interactive:!1});(new a.Marker).setLngLat(this.lngLat).addTo(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-mini-map"]],viewQuery:function(t,e){if(1&t&&i.Gf(d,5),2&t){let t;i.iGM(t=i.CRH())&&(e.divMap=t.first)}},inputs:{lngLat:"lngLat"},decls:2,vars:0,consts:[["map",""]],template:function(t,e){1&t&&i._UZ(0,"div",null,0)},styles:["div[_ngcontent-%COMP%]{width:100%;height:150px;margin:0}"]}),t})();function u(t,e){if(1&t&&(i.TgZ(0,"div",6),i.TgZ(1,"div",7),i._UZ(2,"app-mini-map",8),i.TgZ(3,"div",9),i.TgZ(4,"h5",10),i._uU(5),i.qZA(),i.TgZ(6,"p",11),i._uU(7),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&t){const t=e.$implicit;i.xp6(2),i.Q6J("lngLat",t.lngLat),i.xp6(3),i.Oqu(t.titulo),i.xp6(2),i.Oqu(t.descripcion)}}let h=(()=>{class t{constructor(){this.propiedades=[{titulo:"Casa residencial, Canad\xe1",descripcion:"Bella propiedad en Katana, Canad\xe1",lngLat:[-75.92722289474008,45.280015511264466]},{titulo:"Casa de playa, M\xe9xico",descripcion:"Hermosa casa de playa en Acapulco, M\xe9xico",lngLat:[-99.91287720907991,16.828940930185748]},{titulo:"Apartamento, Argentina",descripcion:"Lujoso apartamento en el coraz\xf3n de Buenos Aires, Argentina",lngLat:[-58.430166677283445,-34.57150108832866]},{titulo:"Local comercial, Espa\xf1a",descripcion:"Local comercial disponible en Madrid, Espa\xf1a, cerca de El Jard\xedn Secreto.",lngLat:[-3.7112735618380177,40.42567285425766]}]}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-properties"]],decls:11,vars:1,consts:[[1,"row","mt-3"],[1,"col-2"],[1,"col"],[1,"row","container"],[1,"row"],["class","col-4 mb-2",4,"ngFor","ngForOf"],[1,"col-4","mb-2"],[1,"card"],[1,"card-img-top",3,"lngLat"],[1,"card-body"],[1,"card-title"],[1,"card-text"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0),i._UZ(1,"div",1),i.TgZ(2,"div",2),i.TgZ(3,"h1"),i._uU(4,"Properties list"),i.qZA(),i._UZ(5,"hr"),i.qZA(),i.qZA(),i.TgZ(6,"div",3),i._UZ(7,"div",1),i.TgZ(8,"div",2),i.TgZ(9,"div",4),i.YNc(10,u,8,3,"div",5),i.qZA(),i.qZA(),i.qZA()),2&t&&(i.xp6(10),i.Q6J("ngForOf",e.propiedades))},directives:[n.sg,g],encapsulation:2}),t})();const f=["map"],v=[{path:"",children:[{path:"fullscreen",component:m},{path:"zoom-range",component:(()=>{class t{constructor(){this.zoomLevel=10,this.mapCenter=[-90.583527,14.535879]}ngOnDestroy(){this.map.off("zoom",()=>{}),this.map.off("zoomend",()=>{}),this.map.off("zoom",()=>{})}ngAfterViewInit(){this.map=new a.Map({container:this.divMap.nativeElement,style:"mapbox://styles/mapbox/streets-v11",center:this.mapCenter,zoom:this.zoomLevel}),this.map.on("zoom",()=>{this.zoomLevel=this.map.getZoom()}),this.map.on("zoomend",t=>{this.map.getZoom()>18&&this.map.zoomTo(18)}),this.map.on("move",t=>{const e=t.target,{lng:o,lat:n}=e.getCenter();this.mapCenter=[o,n]})}zoomIn(){this.map.zoomIn()}zoomOut(){this.map.zoomOut()}zoomChanged(t){console.log(t),this.map.zoomTo(Number(t))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-zoom-range"]],viewQuery:function(t,e){if(1&t&&i.Gf(f,5),2&t){let t;i.iGM(t=i.CRH())&&(e.divMap=t.first)}},decls:16,vars:13,consts:[[1,"map-container"],["map",""],[1,"row"],[1,"col-12"],["for","",1,"form-label"],["type","range","min","0","max","18",1,"form-range",3,"value","input"],["zoomInput",""],[1,"btn","btn-success",3,"click"],[1,"btn","btn-success","float-end",3,"click"]],template:function(t,e){if(1&t){const t=i.EpF();i._UZ(0,"div",0,1),i.TgZ(2,"div",2),i.TgZ(3,"div",3),i.TgZ(4,"label",4),i._uU(5),i.ALo(6,"number"),i.ALo(7,"number"),i.ALo(8,"number"),i.qZA(),i.TgZ(9,"input",5,6),i.NdJ("input",function(){i.CHM(t);const o=i.MAs(10);return e.zoomChanged(o.value)}),i.qZA(),i.qZA(),i.TgZ(11,"div",3),i.TgZ(12,"button",7),i.NdJ("click",function(){return e.zoomOut()}),i._uU(13,"-"),i.qZA(),i.TgZ(14,"button",8),i.NdJ("click",function(){return e.zoomIn()}),i._uU(15,"+"),i.qZA(),i.qZA(),i.qZA()}2&t&&(i.xp6(5),i.lnq(" Zoom:",i.xi3(6,4,e.zoomLevel,"2.0-2")," - Lng, Lat: [ ",i.xi3(7,7,e.mapCenter[0],"2.4-4")," , ",i.xi3(8,10,e.mapCenter[1],"2.4-4"),"] "),i.xp6(4),i.Q6J("value",e.zoomLevel))},pipes:[n.JJ],styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:100%}.row[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px;bottom:50px;left:50px;padding:10px;position:fixed;z-index:999;width:400px}"]}),t})()},{path:"bookmarks",component:p},{path:"properties",component:h},{path:"**",redirectTo:"fullscreen"}]}];let Z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[r.Bz.forChild(v)],r.Bz]}),t})(),k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[n.ez,Z]]}),t})()}}]);